syntax = "proto3";

package routing.estimate;
option go_package = "rpc/estimater";

import "google/protobuf/struct.proto";

// Estimater
service Estimater {
	rpc GetEta(Req) returns (Resp);
}

message Req {
	bytes config = 1; // must be > 0
	repeated Stop stops = 2;
}

message Resp {
	repeated Stop stops = 1; // must be > 0
}

message Stop {
	string ID = 1; // must be > 0
	string manifestID = 2;
	int32 ordinal = 3;
	string full_address = 4;
	double latitude = 5;
	double longitude = 6;
	NullableString next_distance  = 7;
	NullableString next_polyline  = 8;
	string stopTypeID = 9;
	NullableString schedule_start_at = 10;
	NullableString schedule_start_at_v2 = 11;
	NullableString schedule_end_at = 12;
	NullableString schedule_end_at_v2 = 13;
	NullableString estimated_time_of_arrival = 14;
	NullableString estimated_time_of_departure = 15;
	bool is_custom_window_time = 16;
	string org_name = 17;
	string contact_name = 18;
	string address_1 = 19;
	string address_2 = 20;
	string suite = 21;
	string city = 22;
	string state = 23;
	string country = 24;
	string postal = 25;
	string phone = 26;
	string phone_ext = 27;
	string email = 28;
	string fax = 29;
	string timezone = 30;
	NullableString dockID = 31;
	NullableString autogenerated_by = 32;
}

message NullableString {
  oneof kind {
    google.protobuf.NullValue null = 1;
    string data = 2;
  }
}


// ID        string    `db:"id" json:"id"`
// 	CreatedAt time.Time `db:"created_at" json:"created_at"`
// 	UpdatedAt time.Time `db:"updated_at" json:"updated_at"`

// 	ManifestID   string          `db:"master_trip_id" json:"master_trip_id"`
// 	Ordinal      int             `db:"ordinal" json:"ordinal"`
// 	FullAddress  string          `db:"full_address" json:"full_address"`
// 	Latitude     float64         `db:"latitude" json:"latitude"`
// 	Longitude    float64         `db:"longitude" json:"longitude"`
// 	NextDistance sqlr.NullInt64  `db:"next_distance" json:"next_distance"` // meters
// 	NextDuration sqlr.NullInt64  `db:"next_duration" json:"next_duration"` // seconds
// 	NextPolyline sqlr.NullString `db:"next_polyline" json:"next_polyline"`
// 	StopTypeID   string          `db:"type_id" json:"type_id"`

// 	ScheduleStartAt          sqlr.NullTimeNoTZ `db:"schedule_start_at" json:"schedule_start_at"`
// 	ScheduleStartAtV2        sqlr.NullTime     `db:"schedule_start_at_v2" json:"-"`
// 	ScheduleEndAt            sqlr.NullTimeNoTZ `db:"schedule_end_at" json:"schedule_end_at"`
// 	ScheduleEndAtV2          sqlr.NullTime     `db:"schedule_end_at_v2" json:"-"`
// 	EstimatedTimeOfArrival   sqlr.NullTimeNoTZ `db:"-" json:"estimated_time_of_arrival"`
// 	EstimatedTimeOfDeparture sqlr.NullTimeNoTZ `db:"-" json:"estimated_time_of_departure"`
// 	IsCustomWindowTime       bool              `db:"is_custom_window_time" json:"is_custom_window_time"`

// 	OrgName     string `db:"org_name" json:"org_name"`
// 	ContactName string `db:"contact_name" json:"contact_name"`
// 	Address1    string `db:"address_1" json:"address_1"`
// 	Address2    string `db:"address_2" json:"address_2"`
// 	Suite       string `db:"suite" json:"suite"`
// 	City        string `db:"city" json:"city"`
// 	State       string `db:"state" json:"state"`
// 	Country     string `db:"country" json:"country"`
// 	Postal      string `db:"postal" json:"postal"`
// 	Phone       string `db:"phone" json:"phone"`
// 	PhoneExt    string `db:"phone_ext" json:"phone_ext"`
// 	Email       string `db:"email" json:"email"`
// 	Fax         string `db:"fax" json:"fax"`
// 	Timezone    string `db:"timezone" json:"timezone"`

// 	DockID          sqlr.NullString `db:"dock_id" json:"dock_id"`
// 	AutoGeneratedBy sqlr.NullString `db:"auto_generated_by" json:"auto_generated_by"`


